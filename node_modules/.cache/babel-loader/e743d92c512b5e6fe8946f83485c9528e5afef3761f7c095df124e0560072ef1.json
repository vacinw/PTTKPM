{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nexport default createSlice({\n  name: \"foods\",\n  initialState: {\n    status: \"idle\",\n    data: []\n  },\n  reducers: {\n    toggleFoodLikeChange: (state, action) => {\n      const currentFood = state.data.find(food => food.id === action.payload.foodId);\n      if (currentFood) {\n        if (!currentFood.userLiked.includes(action.payload.userId)) {\n          currentFood.userLiked.push(action.payload.userId);\n        } else {\n          currentFood.userLiked = currentFood.userLiked.filter(userId => userId !== action.payload.userId);\n        }\n      }\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchFoods.fulfilled, (state, action) => {\n      state.data = action.payload;\n    }).addCase(toggleFoodLike.fulfilled, (state, action) => {\n      const currentFood = state.data.find(food => food.id === action.payload.id);\n      currentFood.userLiked = action.payload.userLiked;\n    });\n  }\n});\nexport const fetchFoods = createAsyncThunk(\"foods/fetchFoods\", async () => {\n  const res = await fetch(\"http://localhost:3000/foods\");\n  const data = await res.json();\n  return data;\n});\nexport const toggleFoodLike = createAsyncThunk(\"foods/toggleFoodLike\", async updateFood => {\n  const res = await fetch(\"http://localhost:3000/foods/\" + updateFood.id, {\n    method: \"PUT\",\n    headers: {\n      \"Content-type\": \"application/json; charset=UTF-8\"\n    },\n    body: JSON.stringify(updateFood)\n  });\n  const data = await res.json();\n  return data;\n});","map":{"version":3,"names":["createAsyncThunk","createSlice","name","initialState","status","data","reducers","toggleFoodLikeChange","state","action","currentFood","find","food","id","payload","foodId","userLiked","includes","userId","push","filter","extraReducers","builder","addCase","fetchFoods","fulfilled","toggleFoodLike","res","fetch","json","updateFood","method","headers","body","JSON","stringify"],"sources":["/Users/Tamhayhoc/react-webpack/EasyCuk/src/components/Main/foodsSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\nexport default createSlice({\n  name: \"foods\",\n  initialState: {\n    status: \"idle\",\n    data: [],\n  },\n  reducers: {\n    toggleFoodLikeChange: (state, action) => {\n      const currentFood = state.data.find(\n        (food) => food.id === action.payload.foodId\n      );\n      if (currentFood) {\n        if (!currentFood.userLiked.includes(action.payload.userId)) {\n          currentFood.userLiked.push(action.payload.userId);\n        } else {\n          currentFood.userLiked = currentFood.userLiked.filter(\n            (userId) => userId !== action.payload.userId\n          );\n        }\n      }\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchFoods.fulfilled, (state, action) => {\n        state.data = action.payload;\n      })\n      .addCase(toggleFoodLike.fulfilled, (state, action) => {\n        const currentFood = state.data.find(\n          (food) => food.id === action.payload.id\n        );\n        currentFood.userLiked = action.payload.userLiked;\n      });\n  },\n});\n\nexport const fetchFoods = createAsyncThunk(\"foods/fetchFoods\", async () => {\n  const res = await fetch(\"http://localhost:3000/foods\");\n  const data = await res.json();\n  return data;\n});\n\nexport const toggleFoodLike = createAsyncThunk(\n  \"foods/toggleFoodLike\",\n  async (updateFood) => {\n    const res = await fetch(\"http://localhost:3000/foods/\" + updateFood.id, {\n      method: \"PUT\",\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\",\n      },\n      body: JSON.stringify(updateFood),\n    });\n    const data = await res.json();\n    return data;\n  }\n);\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAEhE,eAAeA,WAAW,CAAC;EACzBC,IAAI,EAAE,OAAO;EACbC,YAAY,EAAE;IACZC,MAAM,EAAE,MAAM;IACdC,IAAI,EAAE;EACR,CAAC;EACDC,QAAQ,EAAE;IACRC,oBAAoB,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MACvC,MAAMC,WAAW,GAAGF,KAAK,CAACH,IAAI,CAACM,IAAI,CAChCC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAACK,OAAO,CAACC,MACvC,CAAC;MACD,IAAIL,WAAW,EAAE;QACf,IAAI,CAACA,WAAW,CAACM,SAAS,CAACC,QAAQ,CAACR,MAAM,CAACK,OAAO,CAACI,MAAM,CAAC,EAAE;UAC1DR,WAAW,CAACM,SAAS,CAACG,IAAI,CAACV,MAAM,CAACK,OAAO,CAACI,MAAM,CAAC;QACnD,CAAC,MAAM;UACLR,WAAW,CAACM,SAAS,GAAGN,WAAW,CAACM,SAAS,CAACI,MAAM,CACjDF,MAAM,IAAKA,MAAM,KAAKT,MAAM,CAACK,OAAO,CAACI,MACxC,CAAC;QACH;MACF;IACF;EACF,CAAC;EACDG,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACC,UAAU,CAACC,SAAS,EAAE,CAACjB,KAAK,EAAEC,MAAM,KAAK;MAChDD,KAAK,CAACH,IAAI,GAAGI,MAAM,CAACK,OAAO;IAC7B,CAAC,CAAC,CACDS,OAAO,CAACG,cAAc,CAACD,SAAS,EAAE,CAACjB,KAAK,EAAEC,MAAM,KAAK;MACpD,MAAMC,WAAW,GAAGF,KAAK,CAACH,IAAI,CAACM,IAAI,CAChCC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAACK,OAAO,CAACD,EACvC,CAAC;MACDH,WAAW,CAACM,SAAS,GAAGP,MAAM,CAACK,OAAO,CAACE,SAAS;IAClD,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAMQ,UAAU,GAAGxB,gBAAgB,CAAC,kBAAkB,EAAE,YAAY;EACzE,MAAM2B,GAAG,GAAG,MAAMC,KAAK,CAAC,6BAA6B,CAAC;EACtD,MAAMvB,IAAI,GAAG,MAAMsB,GAAG,CAACE,IAAI,CAAC,CAAC;EAC7B,OAAOxB,IAAI;AACb,CAAC,CAAC;AAEF,OAAO,MAAMqB,cAAc,GAAG1B,gBAAgB,CAC5C,sBAAsB,EACtB,MAAO8B,UAAU,IAAK;EACpB,MAAMH,GAAG,GAAG,MAAMC,KAAK,CAAC,8BAA8B,GAAGE,UAAU,CAACjB,EAAE,EAAE;IACtEkB,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,UAAU;EACjC,CAAC,CAAC;EACF,MAAMzB,IAAI,GAAG,MAAMsB,GAAG,CAACE,IAAI,CAAC,CAAC;EAC7B,OAAOxB,IAAI;AACb,CACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}