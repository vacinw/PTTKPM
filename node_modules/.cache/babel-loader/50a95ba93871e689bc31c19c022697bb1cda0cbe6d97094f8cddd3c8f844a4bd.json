{"ast":null,"code":"import { FETCH_USERS_REQUEST, FETCH_USERS_SUCESS, FETCH_USERS_ERROR, UPDATE_USERS_REQUEST, UPDATE_USERS_SUCESS, UPDATE_USERS_ERROR, CREATE_USERS_REQUEST, CREATE_USERS_SUCESS, CREATE_USERS_ERROR, ADD_LIKE_REQUEST, ADD_LIKE_SUCESS, ADD_LIKE_ERROR, REMOVE_LIKE_REQUEST, REMOVE_LIKE_SUCESS, REMOVE_LIKE_ERROR } from \"../constants/usersConstants\";\nexport const loadUsers = () => async dispath => {\n  try {\n    dispath({\n      type: FETCH_USERS_REQUEST\n    });\n    const url = \"http://localhost:3000/users\";\n    const res = await fetch(url);\n    const data = await res.json();\n    dispath({\n      type: FETCH_USERS_SUCESS,\n      data\n    });\n  } catch (err) {\n    dispath({\n      type: FETCH_USERS_ERROR,\n      message: err\n    });\n  }\n};\nexport const updateUser = (user, data) => async dispath => {\n  try {\n    dispath({\n      type: UPDATE_USERS_REQUEST\n    });\n    const url = \"http://localhost:3000/users\";\n    const userId = user.id;\n    const updateData = {\n      ...user,\n      password: data\n    };\n    const res = await fetch(url + \"/\" + userId, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(updateData)\n    });\n    const resJson = await res.json();\n    dispath({\n      type: UPDATE_USERS_SUCESS,\n      resJson\n    });\n  } catch (err) {\n    dispath({\n      type: UPDATE_USERS_ERROR,\n      message: err\n    });\n  }\n};\nexport const createUser = data => async dispath => {\n  try {\n    dispath({\n      type: CREATE_USERS_REQUEST\n    });\n    const url = \"http://localhost:3000/users\";\n    const newData = {\n      username: data.username,\n      password: data.password,\n      diet: \"null\",\n      liked: []\n    };\n    const res = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newData)\n    });\n    const resJson = await res.json();\n    dispath({\n      type: CREATE_USERS_SUCESS,\n      resJson\n    });\n  } catch (err) {\n    dispath({\n      type: CREATE_USERS_ERROR,\n      message: err\n    });\n  }\n};\nexport const addLike = (user, foodId) => async dispath => {\n  try {\n    dispath({\n      type: ADD_LIKE_REQUEST\n    });\n    const url = \"http://localhost:3000/users\";\n    const userId = user.id;\n    console.log(\"[USER]\", user);\n    console.log(\"[NEW]\", newLiked);\n    const updateData = {\n      ...user,\n      liked: newLiked\n    };\n    // console.log(\"[UPDATE]\", updateData);\n    const res = await fetch(url + \"/\" + userId, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(updateData)\n    });\n    const resJson = await res.json();\n    dispath({\n      type: ADD_LIKE_SUCESS,\n      resJson\n    });\n  } catch (err) {\n    dispath({\n      type: ADD_LIKE_ERROR,\n      message: err\n    });\n  }\n};\nexport const removeLike = (user, foodId) => async dispath => {\n  try {\n    dispath({\n      type: REMOVE_LIKE_REQUEST\n    });\n    const url = \"http://localhost:3000/users\";\n    const userId = user.id;\n    const newLiked = user.liked.filter(like => like !== foodId);\n    const updateData = {\n      ...user,\n      liked: newLiked\n    };\n    console.log(\"[UPDATE]\", updateData);\n    const res = await fetch(url + \"/\" + userId, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(updateData)\n    });\n    const resJson = await res.json();\n    dispath({\n      type: REMOVE_LIKE_SUCESS,\n      resJson\n    });\n  } catch (err) {\n    dispath({\n      type: REMOVE_LIKE_ERROR,\n      message: err\n    });\n  }\n};","map":{"version":3,"names":["FETCH_USERS_REQUEST","FETCH_USERS_SUCESS","FETCH_USERS_ERROR","UPDATE_USERS_REQUEST","UPDATE_USERS_SUCESS","UPDATE_USERS_ERROR","CREATE_USERS_REQUEST","CREATE_USERS_SUCESS","CREATE_USERS_ERROR","ADD_LIKE_REQUEST","ADD_LIKE_SUCESS","ADD_LIKE_ERROR","REMOVE_LIKE_REQUEST","REMOVE_LIKE_SUCESS","REMOVE_LIKE_ERROR","loadUsers","dispath","type","url","res","fetch","data","json","err","message","updateUser","user","userId","id","updateData","password","method","headers","body","JSON","stringify","resJson","createUser","newData","username","diet","liked","addLike","foodId","console","log","newLiked","removeLike","filter","like"],"sources":["/Users/Tamhayhoc/react-webpack/EasyCuk/src/redux/actions/usersAction.js"],"sourcesContent":["import {\n  FETCH_USERS_REQUEST,\n  FETCH_USERS_SUCESS,\n  FETCH_USERS_ERROR,\n  UPDATE_USERS_REQUEST,\n  UPDATE_USERS_SUCESS,\n  UPDATE_USERS_ERROR,\n  CREATE_USERS_REQUEST,\n  CREATE_USERS_SUCESS,\n  CREATE_USERS_ERROR,\n  ADD_LIKE_REQUEST,\n  ADD_LIKE_SUCESS,\n  ADD_LIKE_ERROR,\n  REMOVE_LIKE_REQUEST,\n  REMOVE_LIKE_SUCESS,\n  REMOVE_LIKE_ERROR,\n} from \"../constants/usersConstants\";\n\nexport const loadUsers = () => async (dispath) => {\n  try {\n    dispath({ type: FETCH_USERS_REQUEST });\n\n    const url = \"http://localhost:3000/users\";\n    const res = await fetch(url);\n    const data = await res.json();\n\n    dispath({ type: FETCH_USERS_SUCESS, data });\n  } catch (err) {\n    dispath({ type: FETCH_USERS_ERROR, message: err });\n  }\n};\n\nexport const updateUser = (user, data) => async (dispath) => {\n  try {\n    dispath({ type: UPDATE_USERS_REQUEST });\n\n    const url = \"http://localhost:3000/users\";\n    const userId = user.id;\n    const updateData = { ...user, password: data };\n    const res = await fetch(url + \"/\" + userId, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(updateData),\n    });\n    const resJson = await res.json();\n\n    dispath({ type: UPDATE_USERS_SUCESS, resJson });\n  } catch (err) {\n    dispath({ type: UPDATE_USERS_ERROR, message: err });\n  }\n};\n\nexport const createUser = (data) => async (dispath) => {\n  try {\n    dispath({ type: CREATE_USERS_REQUEST });\n\n    const url = \"http://localhost:3000/users\";\n    const newData = {\n      username: data.username,\n      password: data.password,\n      diet: \"null\",\n      liked: [],\n    };\n    const res = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(newData),\n    });\n    const resJson = await res.json();\n\n    dispath({ type: CREATE_USERS_SUCESS, resJson });\n  } catch (err) {\n    dispath({ type: CREATE_USERS_ERROR, message: err });\n  }\n};\n\nexport const addLike = (user, foodId) => async (dispath) => {\n  try {\n    dispath({ type: ADD_LIKE_REQUEST });\n\n    const url = \"http://localhost:3000/users\";\n    const userId = user.id;\n    console.log(\"[USER]\", user);\n    console.log(\"[NEW]\", newLiked);\n\n    const updateData = { ...user, liked: newLiked };\n    // console.log(\"[UPDATE]\", updateData);\n    const res = await fetch(url + \"/\" + userId, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(updateData),\n    });\n    const resJson = await res.json();\n\n    dispath({ type: ADD_LIKE_SUCESS, resJson });\n  } catch (err) {\n    dispath({ type: ADD_LIKE_ERROR, message: err });\n  }\n};\n\nexport const removeLike = (user, foodId) => async (dispath) => {\n  try {\n    dispath({ type: REMOVE_LIKE_REQUEST });\n\n    const url = \"http://localhost:3000/users\";\n    const userId = user.id;\n    const newLiked = user.liked.filter((like) => like !== foodId);\n    const updateData = { ...user, liked: newLiked };\n    console.log(\"[UPDATE]\", updateData);\n\n    const res = await fetch(url + \"/\" + userId, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(updateData),\n    });\n    const resJson = await res.json();\n\n    dispath({ type: REMOVE_LIKE_SUCESS, resJson });\n  } catch (err) {\n    dispath({ type: REMOVE_LIKE_ERROR, message: err });\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}