{"ast":null,"code":"import { v4 as uuidv4 } from \"uuid\";\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nexport default createSlice({\n  name: \"users\",\n  initialState: {\n    status: \"idle\",\n    data: []\n  },\n  reducers: {\n    fetchUsers: (state, action) => {\n      state.data = action.payload;\n    },\n    addUserChange: (state, action) => {\n      state.data.push(action.payload);\n    },\n    updatePasswordChange: (state, action) => {\n      const currentUser = state.data.find(user => user.id === action.payload.id);\n      currentUser.password = action.payload.newPassword;\n    },\n    toggleUserLikeChange: (state, action) => {\n      const currentUser = state.find(user => user.id === action.payload.userId);\n      if (currentUser) {\n        if (!currentUser.liked.includes(action.payload.foodId)) {\n          currentUser.liked.push(action.payload.foodId);\n        } else {\n          currentUser.liked = currentUser.liked.filter(foodId => foodId !== action.payload.foodId);\n        }\n      }\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchUsers.pending, (state, action) => {\n      state.status = \"loading\";\n    }).addCase(fetchUsers.fulfilled, (state, action) => {\n      state.status = \"idle\";\n      state.data = action.payload;\n    }).addCase(addUser.fulfilled, (state, action) => {\n      state.data.push(action.payload);\n    }).addCase(updatePassword.fulfilled, (state, action) => {\n      const currentUser = state.data.find(user => user.id === action.payload.id);\n      currentUser.password = action.payload.password;\n    });\n  }\n});\nexport const fetchUsers = createAsyncThunk(\"users/fetchUsers\", async () => {\n  const res = await fetch(\"http://localhost:3000/users\");\n  const data = await res.json();\n  return data;\n});\nexport const addUser = createAsyncThunk(\"users/addUser\", async newUser => {\n  const res = await fetch(\"http://localhost:3000/users\", {\n    method: \"POST\",\n    headers: {\n      \"Content-type\": \"application/json; charset=UTF-8\"\n    },\n    body: JSON.stringify(newUser)\n  });\n  const data = await res.json();\n  return data;\n});\nexport const updatePassword = createAsyncThunk(\"users/updatePassword\", async updateUser => {\n  const res = await fetch(\"http://localhost:3000/users/\" + updateUser.id, {\n    method: \"PUT\",\n    headers: {\n      \"Content-type\": \"application/json; charset=UTF-8\"\n    },\n    body: JSON.stringify(updateUser)\n  });\n  const data = await res.json();\n  console.log(\"updated password\", data);\n  return data;\n});","map":{"version":3,"names":["v4","uuidv4","createSlice","createAsyncThunk","name","initialState","status","data","reducers","fetchUsers","state","action","payload","addUserChange","push","updatePasswordChange","currentUser","find","user","id","password","newPassword","toggleUserLikeChange","userId","liked","includes","foodId","filter","extraReducers","builder","addCase","pending","fulfilled","addUser","updatePassword","res","fetch","json","newUser","method","headers","body","JSON","stringify","updateUser","console","log"],"sources":["/Users/Tamhayhoc/react-webpack/EasyCuk/src/components/pages/forms/usersSlice.js"],"sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\nexport default createSlice({\n  name: \"users\",\n  initialState: {\n    status: \"idle\",\n    data: [],\n  },\n  reducers: {\n    fetchUsers: (state, action) => {\n      state.data = action.payload;\n    },\n    addUserChange: (state, action) => {\n      state.data.push(action.payload);\n    },\n    updatePasswordChange: (state, action) => {\n      const currentUser = state.data.find(\n        (user) => user.id === action.payload.id\n      );\n      currentUser.password = action.payload.newPassword;\n    },\n    toggleUserLikeChange: (state, action) => {\n      const currentUser = state.find(\n        (user) => user.id === action.payload.userId\n      );\n      if (currentUser) {\n        if (!currentUser.liked.includes(action.payload.foodId)) {\n          currentUser.liked.push(action.payload.foodId);\n        } else {\n          currentUser.liked = currentUser.liked.filter(\n            (foodId) => foodId !== action.payload.foodId\n          );\n        }\n      }\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchUsers.pending, (state, action) => {\n        state.status = \"loading\";\n      })\n      .addCase(fetchUsers.fulfilled, (state, action) => {\n        state.status = \"idle\";\n        state.data = action.payload;\n      })\n      .addCase(addUser.fulfilled, (state, action) => {\n        state.data.push(action.payload);\n      })\n      .addCase(updatePassword.fulfilled, (state, action) => {\n        const currentUser = state.data.find(\n          (user) => user.id === action.payload.id\n        );\n        currentUser.password = action.payload.password;\n      });\n  },\n});\n\nexport const fetchUsers = createAsyncThunk(\"users/fetchUsers\", async () => {\n  const res = await fetch(\"http://localhost:3000/users\");\n  const data = await res.json();\n  return data;\n});\n\nexport const addUser = createAsyncThunk(\"users/addUser\", async (newUser) => {\n  const res = await fetch(\"http://localhost:3000/users\", {\n    method: \"POST\",\n    headers: {\n      \"Content-type\": \"application/json; charset=UTF-8\",\n    },\n    body: JSON.stringify(newUser),\n  });\n  const data = await res.json();\n  return data;\n});\n\nexport const updatePassword = createAsyncThunk(\n  \"users/updatePassword\",\n  async (updateUser) => {\n    const res = await fetch(\"http://localhost:3000/users/\" + updateUser.id, {\n      method: \"PUT\",\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\",\n      },\n      body: JSON.stringify(updateUser),\n    });\n    const data = await res.json();\n    console.log(\"updated password\", data);\n    return data;\n  }\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}